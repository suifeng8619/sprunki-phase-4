!function(){"use strict";function e(e,n=10,t=500){return new Promise((o,l)=>{let r=0;const c=()=>{const s=document.getElementById(e.replace("#",""));s?o(s):r<n?(r++,console.log(`Waiting for ${e}, attempt ${r}/${n}`),setTimeout(c,t)):l(new Error(`Element ${e} not found after ${n} attempts`))};c()})}function n(){const n=document.getElementById("status-pseudo-fullscreen-btn"),t=document.getElementById("status-native-fullscreen-btn"),o=document.getElementById("comments-btn");function l(){if(!n)return;const e=document.getElementById("game_section"),t=e&&e.classList.contains("fullscreen"),o=n.querySelector("span"),l=n.querySelector("svg");t?(n.title="Exit iOS Fullscreen",o&&(o.textContent="Exit iOS"),l&&(l.innerHTML='\n                        <rect x="5" y="5" width="60" height="60" fill="none" stroke="currentColor" stroke-width="6" rx="3"/>\n                        <g fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="square">\n                            <path d="M25 15 L25 25 L15 25"/>\n                            <path d="M45 15 L45 25 L55 25"/>\n                            <path d="M25 55 L25 45 L15 45"/>\n                            <path d="M45 55 L45 45 L55 45"/>\n                        </g>\n                    '),n.style.backgroundColor="#7c3aed"):(n.title="iOS Fullscreen",o&&(o.textContent="iOS Fullscreen"),l&&(l.innerHTML='\n                        <rect x="5" y="5" width="60" height="60" fill="none" stroke="currentColor" stroke-width="6" rx="3"/>\n                        <g fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="square">\n                            <path d="M15 25 L15 15 L25 15"/>\n                            <path d="M55 25 L55 15 L45 15"/>\n                            <path d="M15 45 L15 55 L25 55"/>\n                            <path d="M55 45 L55 55 L45 55"/>\n                        </g>\n                    '),n.style.backgroundColor="#a855f7")}function r(){if(!n)return;const e=document.getElementById("game_section"),t=e&&e.classList.contains("fullscreen"),o=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement),l=t&&!o,r=n.querySelector("span"),c=n.querySelector("svg");l?(n.title="Exit Pseudo Fullscreen",r&&(r.textContent="Exit Pseudo"),c&&(c.innerHTML='\n                        <rect x="5" y="5" width="60" height="60" fill="none" stroke="currentColor" stroke-width="6" rx="3"/>\n                        <g fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="square">\n                            <path d="M25 15 L25 25 L15 25"/>\n                            <path d="M45 15 L45 25 L55 25"/>\n                            <path d="M25 55 L25 45 L15 45"/>\n                            <path d="M45 55 L45 45 L55 45"/>\n                        </g>\n                    '),n.style.backgroundColor="#7c3aed"):(n.title="Pseudo Fullscreen",r&&(r.textContent="Pseudo Fullscreen"),c&&(c.innerHTML='\n                        <rect x="5" y="5" width="60" height="60" fill="none" stroke="currentColor" stroke-width="6" rx="3"/>\n                        <g fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="square">\n                            <path d="M15 25 L15 15 L25 15"/>\n                            <path d="M55 25 L55 15 L45 15"/>\n                            <path d="M15 45 L15 55 L25 55"/>\n                            <path d="M55 45 L55 55 L45 55"/>\n                        </g>\n                    '),n.style.backgroundColor="#a855f7")}function c(){if(!t)return;const e=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement),n=t.querySelector("span"),o=t.querySelector("svg");e?(t.title="Exit Native Fullscreen",n&&(n.textContent="Exit Native"),o&&(o.innerHTML='\n                        <g fill="none" stroke="currentColor" stroke-width="12" stroke-linecap="square">\n                            <path d="M35 20 L35 35 L20 35"/>\n                            <path d="M65 20 L65 35 L80 35"/>\n                            <path d="M35 80 L35 65 L20 65"/>\n                            <path d="M65 80 L65 65 L80 65"/>\n                        </g>\n                    '),t.style.backgroundColor="#7c3aed"):(t.title="Native Fullscreen",n&&(n.textContent="Native Fullscreen"),o&&(o.innerHTML='\n                        <g fill="none" stroke="currentColor" stroke-width="12" stroke-linecap="square">\n                            <path d="M20 35 L20 20 L35 20"/>\n                            <path d="M80 35 L80 20 L65 20"/>\n                            <path d="M20 65 L20 80 L35 80"/>\n                            <path d="M80 65 L80 80 L65 80"/>\n                        </g>\n                    '),t.style.backgroundColor="#a855f7")}/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?(console.log("iOS device detected, initializing iOS fullscreen integration"),function(){if(!n)return void console.warn("Game Status Bar: Pseudo fullscreen button not found for iOS");const e=n.querySelector("span");e&&(e.textContent="iOS Fullscreen");n.title="iOS Fullscreen",n.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),"function"==typeof window.isIOS&&"function"==typeof window.enterIOSFullscreen&&"function"==typeof window.exitIOSFullscreen){const e=document.getElementById("game_section");e&&e.classList.contains("fullscreen")?(console.log("Triggering exit iOS fullscreen"),window.exitIOSFullscreen()):(console.log("Triggering enter iOS fullscreen"),window.enterIOSFullscreen())}else console.warn("iOS fullscreen functions not available")});const t=new MutationObserver(function(e){e.forEach(function(e){"attributes"===e.type&&"class"===e.attributeName&&l()})}),o=document.getElementById("game_section");o&&t.observe(o,{attributes:!0});l()}(),t&&(t.style.display="none")):(console.log("Non-iOS device detected, initializing standard fullscreen integration"),async function(){if(!n)return void console.warn("Game Status Bar: Pseudo fullscreen button not found");try{const t=await e("fullscreen-btn"),o=await e("exit-fullscreen-btn");console.log("Found original pseudo fullscreen buttons:",t,o),t.style.display="none",o.style.display="none",n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();const n=document.getElementById("game_section"),l=n&&n.classList.contains("fullscreen");!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?l?(console.log("Triggering exit pseudo fullscreen"),o.click()):(console.log("Triggering enter pseudo fullscreen"),t.click()):console.log("Cannot use pseudo fullscreen while in native fullscreen mode")});const l=new MutationObserver(function(e){e.forEach(function(e){"attributes"===e.type&&"class"===e.attributeName&&r()})}),c=document.getElementById("game_section");c&&l.observe(c,{attributes:!0}),r()}catch(e){console.error("Failed to initialize pseudo fullscreen integration:",e),n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();const n=document.getElementById("game_section");n&&(n.classList.contains("fullscreen")?n.classList.remove("fullscreen"):n.classList.add("fullscreen"),r())})}}(),async function(){if(!t)return void console.warn("Game Status Bar: Native fullscreen button not found");try{const n=await e("native-fullscreen-btn"),o=await e("native-exit-fullscreen-btn");console.log("Found original native fullscreen buttons:",n,o),n.style.display="none",o.style.display="none",t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?(console.log("Triggering exit native fullscreen"),o.click()):(console.log("Triggering enter native fullscreen"),n.click())}),document.addEventListener("fullscreenchange",c),document.addEventListener("webkitfullscreenchange",c),document.addEventListener("mozfullscreenchange",c),document.addEventListener("MSFullscreenChange",c),c()}catch(e){console.error("Failed to initialize native fullscreen integration:",e),t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();if(!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement))document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{const e=document.getElementById("game_section");e&&(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen())}})}}()),o&&o.addEventListener("click",function(){console.log("Comments button clicked")})}window.scrollToComments=function(){const e=document.querySelector(".comments-section");e&&(e.scrollIntoView({behavior:"smooth",block:"start"}),e.style.transition="background-color 0.3s ease",e.style.backgroundColor="rgba(147, 51, 234, 0.05)",setTimeout(()=>{e.style.backgroundColor=""},1e3))},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}();